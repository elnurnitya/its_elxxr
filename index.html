<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Merry Christmas and Happy New Year</title>

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&family=Pacifico&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #0b0b0b;
      --card: #111;
      --red: #d62828;
      --white: #fff;
      --muted: #b8c2cf;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: url("Image/istockphoto-509422646-612x612.jpg")
                  no-repeat center center fixed;
      background-size: cover;
      color: var(--white);
      font-family: Montserrat, system-ui, Arial, sans-serif;
      padding: 18px;
    }

    /* layout */
    .wrap {
      max-width: 980px;
      margin: 0 auto;
    }

    .center {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* popup name & greeting modal overlay */
    #nameModal,
    #greetingCard {
      position: fixed;
      inset: 0;
      background: linear-gradient(rgba(2, 2, 2, 0.5), rgba(2, 2, 2, 0.5));
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-card {
      background: rgba(11, 19, 32, 0.40);
      padding: 26px;
      border-radius: 5px;
      width: 94%;
      max-width: 420px;
      text-align: center;
      box-shadow: 0 8px 40px rgba(0, 0, 0, 0.7);
    }

    .modal-card h2 {
      font-family: "Georgia", serif;
      color: var(--white);
      margin: 0 0 8px;
    }

    .modal-card input {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.06);
      background: transparent;
      color: inherit;
    }

    .btn {
      display: inline-block;
      padding: 10px 14px;
      border-radius: 10px;
      border: none;
      background: var(--red);
      color: #fff;
      cursor: pointer;
      margin-top: 12px;
    }

    /* global card style */
    .card {
      position: relative;
      padding: 22px;
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.03);
      box-shadow: 0 8px 30px rgba(2, 6, 23, 0.6);
      margin: 18px 0;
      background: url("Image/fourth of july fireworks GIF by hateplow.gif")
                  center/cover no-repeat;
      overflow: hidden;
      z-index: 10; /* card selalu di atas salju */
    }

    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(11, 19, 32, 0.45);
      backdrop-filter: blur(1px);
      z-index: 0;
    }

    .card > * {
      position: relative;
      z-index: 1;
    }

    .card.small {
      width: 80vw;       /* 80% of viewport width */
      max-width: 900px;  /* limit agar tetap cantik */
      margin: 12px auto;
      padding: 32px;
      border-radius: 18px;
    }

    .card-title {
      font-family: "Pacifico", "Georgia", serif;
      font-size: 46px;
      margin: 0 0 10px;
      text-align: center;
      line-height: 1.15;
    }

    /* tema Natal merah–putih + glow untuk title */
    #greetingCard .card-title span {
      text-shadow:
        0 0 4px rgba(255, 255, 255, 0.9),
        0 0 10px rgba(255, 255, 255, 0.8),
        0 0 18px rgba(255, 75, 92, 0.6),
        0 0 32px rgba(255, 75, 92, 0.4);
      animation: titleGlow 2.6s ease-in-out infinite;
    }

    #greetingCard .title-red {
      color: #ff4b5c;
    }

    #greetingCard .title-white {
      color: #ffffff;
    }

    #greetingCard .title-amp {
      color: #f5db76;
      margin: 0 6px;
    }

    @keyframes titleGlow {
      0%, 100% {
        text-shadow:
          0 0 2px rgba(255, 255, 255, 0.5),
          0 0 6px rgba(255, 255, 255, 0.4),
          0 0 12px rgba(255, 75, 92, 0.3),
          0 0 20px rgba(255, 75, 92, 0.2);
      }
      50% {
        text-shadow:
          0 0 4px rgba(255, 255, 255, 1),
          0 0 12px rgba(255, 255, 255, 0.9),
          0 0 24px rgba(255, 75, 92, 0.8),
          0 0 40px rgba(255, 75, 92, 0.6);
      }
    }

    p.lead {
      margin: 0;
      color: var(--muted);
    }
    
    /* Jarak atas khusus paragraf di greeting card */
    #greetingCard .lead {
      margin-top: 18px;
    }

    /* isi greeting card */
    .greeting-inner {
      text-align: center;
    }

    /* H1 Nama — tampil spesial */
    #greetName{
      font-family: "Georgia", serif;
      font-size: 42px;
      font-weight: 700;
      color: #ffffff;              /* putih */
      margin: 24px 0 28px;
      letter-spacing: 1px;
    
      /* glow putih */
      text-shadow:
        0 0 4px rgba(255, 255, 255, 0.45),
        0 0 10px rgba(255, 255, 255, 0.45),
        0 0 20px rgba(255, 255, 255, 0.35);
    
      animation: nameGlow 3s ease-in-out infinite;
    }

    @keyframes nameGlow{
      0%, 100%{
        text-shadow:
          0 0 3px rgba(255, 255, 255, 0.35),
          0 0 8px rgba(255, 255, 255, 0.25),
          0 0 14px rgba(255, 255, 255, 0.2);
      }
      50%{
        text-shadow:
          0 0 6px rgba(255, 255, 255, 0.7),
          0 0 14px rgba(255, 255, 255, 0.6),
          0 0 26px rgba(255, 255, 255, 0.5);
      }
    }

  /* responsif tetap boleh dipakai */
  @media (max-width:640px){
    #greetName{
      font-size: 32px;
    }
  }
    
    /* wrapper GIF */
    .card-gifs {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 12px;
      margin: 6px 0 10px;
      overflow: visible;
    }

    /* GIF khusus di greeting card – 60% lebar card */
    #greetingCard .card-gifs .gif {
      width: 60%;
      height: auto;
      object-fit: contain;
      max-width: none;
      display: block;
      margin: 0 auto;
    }

    /* animasi lembut */
    .card-gifs .santa {
      animation: santaFloat 2.6s ease-in-out infinite;
    }

    .card-gifs .firework {
      animation: fireworkPulse 1.8s ease-in-out infinite;
    }

    @keyframes santaFloat {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-6px); }
    }

    @keyframes fireworkPulse {
      0%, 100% { transform: scale(1); opacity: 0.9; }
      50% { transform: scale(1.12); opacity: 1; }
    }

    /* greeting card behavior */
    #greetingCard {
      display: none;  /* akan di-set ke flex lewat JS */
      cursor: pointer;
    }

    /* Icon surat besar: 40% lebar card, di tengah */
    #greetingCard .letter-icon{
      width: 15%;
      max-width: 260px;        /* biar di layar besar nggak terlalu gede, optional */
      height: auto;
      display: block;
      margin: 16px auto 0;     /* center + jarak dari teks */
    }

    
    /* agar teks tidak terdorong */
    .card .lead{
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    @media (max-width:640px){
      .card .lead svg{
        width: 28%;
      }
    }


    /* message */
    #messageCard {
      display: none;
    }

    /* tree area */
    #treeCard {
      display: none;
      text-align: center;
    }

    #tree-wrap {
      display: inline-block;
      padding: 16px;
      background: linear-gradient(180deg, #071116, #0b1620);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.03);
    }

    .tree-svg {
      width: 320px;
      height: auto;
      display: block;
      margin: 0 auto;
    }

    /* twinkling lights */
    .light {
      filter: drop-shadow(0 0 8px rgba(214, 40, 40, 0.6));
    }

    @keyframes twinkle {
      0%   { opacity: 0.2; transform: scale(0.9); }
      50%  { opacity: 1;   transform: scale(1.08); }
      100% { opacity: 0.25;transform: scale(0.95); }
    }

    .light--a { animation: twinkle 1.6s infinite ease-in-out; }
    .light--b { animation: twinkle 1.9s infinite ease-in-out; }
    .light--c { animation: twinkle 2.2s infinite ease-in-out; }

    /* wish list */
    #wishList {
      max-width: 460px;
      margin: 12px auto;
      text-align: left;
    }

    .wish-item {
      background: rgba(255, 255, 255, 0.03);
      padding: 10px;
      margin: 8px 0;
      border-radius: 8px;
      border-left: 4px solid var(--red);
    }

    /* controls */
    .controls {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 12px;
    }

    .download-btn {
      background: var(--red);
      border: none;
      color: #fff;
      padding: 10px 14px;
      border-radius: 10px;
      cursor: pointer;
    }

    /* recap */
    #recap {
      display: none;
    }

    .recap-slider {
      display: flex;
      gap: 12px;
      overflow: hidden;
    }

    .recap-slide {
      min-width: 100%;
      transition: transform .4s;
    }

    /* snow (canvas) overlay */
    #snow-canvas {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: -1;
    }

    /* subtle glow around cards */
    .glow {
      box-shadow: 0 8px 40px rgba(214, 40, 40, 0.12);
    }

    /* responsive */
    @media (max-width: 640px) {
      .card-title {
        font-size: 32px;
      }
      #greetingCard .card-gifs .gif {
        width: 70%;
      }
      #greetName {
        font-size: 32px;
      }
      .tree-svg {
        width: 240px;
      }
    }
  </style>
</head>
<body>

<div class="wrap">
  <!-- NAME POPUP -->
  <div id="nameModal">
    <div class="modal-card">
      <h2>Enter Your Name</h2>
      <input id="username" placeholder="Your name (e.g. Elnur Nitya)" />
      <button class="btn" id="btnStart">Start</button>
    </div>
  </div>

  <!-- GREETING CARD -->
  <div id="greetingCard" class="card small">
    <div class="greeting-inner">
      <div class="card-title">
        <span class="title-red">Merry Christmas</span>
        <span class="title-amp">&</span>
        <span class="title-white">Happy New Year</span>
      </div>

      <!-- nama orang, akan diisi via JS -->
      <h1 id="greetName"></h1>

      <div class="card-gifs">
        <img src="Image/Santa Clause GIF by filmeditor.gif"
             alt="Santa Claus"
             class="gif santa">
      </div>

      <p class="lead">
        Click this card to open your special message.
      </p>
      
      <svg class="letter-icon"
           viewBox="0 0 24 24"
           fill="none"
           stroke="white"
           stroke-width="2"
           stroke-linecap="round"
           stroke-linejoin="round">
        <rect x="3" y="5" width="18" height="14" rx="2" ry="2"></rect>
        <polyline points="3 7 12 13 21 7"></polyline>
      </svg>

    </div>
  </div>

  <!-- MESSAGE CARD -->
  <div id="messageCard" class="card">
    <div class="inner">
      <div class="card-title">Pesan Hangat</div>
      <p class="lead">
        Semoga tahun mendatang membawa kebahagiaan, kesehatan, dan kenangan manis.
        Klik tombol untuk menaruh harapanmu di pohon Natal.
      </p>
      <div class="controls">
        <button class="btn" id="btnOpenTree">Buka Wish Tree</button>
      </div>
    </div>
  </div>

  <!-- WISH TREE CARD -->
  <div id="treeCard" class="card center">
    <div id="tree-wrap">
      <svg class="tree-svg" viewBox="0 0 200 300" xmlns="http://www.w3.org/2000/svg" id="svgTree">
        <rect x="90" y="250" width="20" height="40" rx="2" fill="#5b3a2e"></rect>
          <polygon id="layer1" points="100,140 70,220 130,220" fill="#063b1f"></polygon>
          <polygon id="layer2" points="100,80 55,160 145,160" fill="#094f29"></polygon>
          <polygon id="layer3" points="100,20 40,110 160,110" fill="#0b6b37"></polygon>
          <g id="wishTextGroup"></g>
        <polygon points="100,8 105,20 118,20 108,28 112,40 100,32 88,40 92,28 82,20 95,20"
                 fill="#ffd166"></polygon>
      </svg>

      <div style="margin-top:12px">
        <input id="wishInput"
               placeholder="Tulis wish... (bisa banyak)"
               style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);width:260px;background:transparent;color:inherit">
        <button class="btn" id="addWish">Tambah</button>
      </div>

      <div id="wishList"></div>

      <div class="controls" style="margin-top:12px">
        <button class="download-btn" id="downloadCardBtn">Download Card (PNG)</button>
        <button class="download-btn" id="downloadTreeBtn">Download Tree (PNG)</button>
      </div>
    </div>
  </div>

  <!-- RECAP -->
  <div id="recap" class="card">
    <div class="card-title">Recap Tahun Ini</div>
    <div class="recap-slider" id="recapSlider" style="overflow:hidden;position:relative">
      <div class="recap-slide" id="recapInner" style="display:flex;transition:transform .45s">
        <!-- slides injected -->
      </div>
    </div>
    <div class="controls" style="margin-top:12px">
      <button class="btn" id="prevSlide">Prev</button>
      <button class="btn" id="nextSlide">Next</button>
    </div>
  </div>
</div>

<canvas id="snow-canvas"></canvas>

<script>
  const nameModal   = document.getElementById('nameModal');
  const btnStart    = document.getElementById('btnStart');
  const greetCard   = document.getElementById('greetingCard');
  const messageCard = document.getElementById('messageCard');
  const treeCard    = document.getElementById('treeCard');
  const recapCard   = document.getElementById('recap');
  const greetName   = document.getElementById('greetName');
  const btnOpenTree = document.getElementById('btnOpenTree');

  // snow
  const canvas = document.getElementById('snow-canvas');
  const ctx = canvas.getContext('2d');

  function resize() {
    canvas.width = innerWidth;
    canvas.height = innerHeight;
  }
  addEventListener('resize', resize);
  resize();

  let flakes = [];
  function initSnow(n = 160) {
    flakes = [];
    for (let i = 0; i < n; i++) {
      flakes.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: Math.random() * 3 + 1,
        d: Math.random() * 1.5 + 0.5,
        spd: Math.random() * 0.8 + 0.2
      });
    }
  }

  function renderSnow() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = 'rgba(255,255,255,0.9)';
    flakes.forEach(f => {
      ctx.beginPath();
      ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2);
      ctx.fill();
      f.y += f.spd + f.d;
      f.x += Math.sin(f.y / 30) * 0.6;
      if (f.y > canvas.height) {
        f.y = -10;
        f.x = Math.random() * canvas.width;
      }
    });
    requestAnimationFrame(renderSnow);
  }

  initSnow(160);
  renderSnow();

  // flow: name -> greeting -> message -> tree -> recap
  btnStart.onclick = () => {
    const name = document.getElementById('username').value.trim();
    if (!name) return alert('Isi nama dulu ya');
    nameModal.style.display = 'none';
    greetName.innerText = name;
    greetCard.style.display = 'flex'; // penting: biar tetap center (flex)
  };

  greetCard.onclick = () => {
    greetCard.style.display = 'none';
    messageCard.style.display = 'block';
    messageCard.classList.add('glow');
    setTimeout(() => messageCard.classList.remove('glow'), 900);
  };

  btnOpenTree.onclick = () => {
    messageCard.style.display = 'none';
    treeCard.style.display = 'block';
  };

  // WISH TEXT PLACEMENT
  const svgTree   = document.getElementById('svgTree');
  const wishGroup = document.getElementById('wishTextGroup');
  const wishInput = document.getElementById('wishInput');
  const addWishBtn = document.getElementById('addWish');
  const wishListEl = document.getElementById('wishList');
  let wishes = [];

  function computePositionForIndex(idx) {
    let level = 0, cumulative = 0;
    while (true) {
      cumulative += (level + 1);
      if (idx < cumulative) break;
      level++;
    }
    const levelStart = cumulative - (level + 1);
    const posInLevel = idx - levelStart;
    const maxWidth = 120 - (level * 12);
    const xCenter = 100;
    const slots = level + 1;
    const spacing = maxWidth / slots;
    const x = xCenter + (posInLevel - (slots - 1) / 2) * spacing;
    const y = 60 + level * 40;
    return { x: Math.round(x), y: Math.round(y), level };
  }

  function wrapText(text, maxChars = 20) {
    const words = text.split(' ');
    const lines = [];
    let cur = '';
    for (const w of words) {
      const test = (cur + ' ' + w).trim();
      if (test.length <= maxChars) {
        cur = test;
      } else {
        if (cur) lines.push(cur);
        cur = w;
      }
    }
    if (cur) lines.push(cur);
    return lines;
  }

  function placeWishText(text, idx) {
    const pos = computePositionForIndex(idx);
    const txt = document.createElementNS('http://www.w3.org/2000/svg', 'text');
    txt.setAttribute('x', pos.x);
    txt.setAttribute('y', pos.y);
    txt.setAttribute('fill', '#ffffff');
    txt.setAttribute('font-size', '10');
    txt.setAttribute('font-weight', '600');
    txt.setAttribute('text-anchor', 'middle');
    txt.setAttribute('pointer-events', 'visible');

    const lines = wrapText(text, 16);
    const startDy = -(lines.length - 1) * 7;
    lines.forEach((ln, i) => {
      const tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');
      tspan.setAttribute('x', pos.x);
      tspan.setAttribute('dy', i === 0 ? startDy : 14);
      tspan.textContent = ln;
      txt.appendChild(tspan);
    });

    txt.addEventListener('click', () => {
      alert('Wish: ' + text);
    });

    wishGroup.appendChild(txt);
  }

  function renderWishList() {
    wishListEl.innerHTML = '';
    wishes.forEach((w, i) => {
      const d = document.createElement('div');
      d.className = 'wish-item';
      d.innerHTML = `<strong>${i + 1}.</strong> ${w}`;
      wishListEl.appendChild(d);
    });
  }

  addWishBtn.onclick = () => {
    const v = wishInput.value.trim();
    if (!v) return alert('Tulis harapan dulu');
    const idx = wishes.length;
    wishes.push(v);
    placeWishText(v, idx);
    renderWishList();
    wishInput.value = '';
  };

  wishInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      e.preventDefault();
      addWishBtn.click();
    }
  });

  // SVG -> PNG helper
  function svgToDataUrl(svgEl, scale = 2) {
    return new Promise((resolve, reject) => {
      const clone = svgEl.cloneNode(true);
      const serializer = new XMLSerializer();
      let svgString = serializer.serializeToString(clone);
      if (!svgString.match(/^<svg[^>]+xmlns=/)) {
        svgString = svgString.replace('<svg', '<svg xmlns="http://www.w3.org/2000/svg" ');
      }
      svgString = '<?xml version="1.0" standalone="no"?>\n' + svgString;
      const svg64 = encodeURIComponent(svgString);
      const url = 'data:image/svg+xml;charset=utf-8,' + svg64;
      const img = new Image();
      img.onload = () => {
        const viewBox = svgEl.viewBox.baseVal;
        const w = viewBox && viewBox.width ? viewBox.width : svgEl.clientWidth;
        const h = viewBox && viewBox.height ? viewBox.height : svgEl.clientHeight;
        const canvas = document.createElement('canvas');
        canvas.width = (w || svgEl.clientWidth) * scale;
        canvas.height = (h || svgEl.clientHeight) * scale;
        const cctx = canvas.getContext('2d');
        cctx.fillStyle = 'transparent';
        cctx.fillRect(0, 0, canvas.width, canvas.height);
        cctx.drawImage(img, 0, 0, canvas.width, canvas.height);
        const data = canvas.toDataURL('image/png');
        resolve({ data, width: canvas.width, height: canvas.height });
      };
      img.onerror = (e) => reject(e);
      img.crossOrigin = 'anonymous';
      img.src = url;
    });
  }

  // DOWNLOAD Tree
  document.getElementById('downloadTreeBtn').addEventListener('click', async () => {
    try {
      const svg = document.getElementById('svgTree');
      const out = await svgToDataUrl(svg, 2);
      const a = document.createElement('a');
      a.href = out.data;
      a.download = `wish-tree-${Date.now()}.png`;
      a.click();
      setTimeout(() => {
        treeCard.style.display = 'none';
        recapCard.style.display = 'block';
      }, 600);
    } catch (err) {
      alert('Gagal generate tree: ' + err);
      console.error(err);
    }
  });

  // DOWNLOAD Card
  document.getElementById('downloadCardBtn').addEventListener('click', async () => {
    try {
      const svg = document.getElementById('svgTree');
      const svgOut = await svgToDataUrl(svg, 2);
      const W = 1200;
      const H = 630;
      const c = document.createElement('canvas');
      c.width = W;
      c.height = H;
      const cctx = c.getContext('2d');

      cctx.fillStyle = '#070707';
      cctx.fillRect(0, 0, W, H);

      const name = greetName.innerText || '';
      cctx.fillStyle = '#fff';
      cctx.textAlign = 'left';
      cctx.font = '48px Georgia';
      cctx.fillText('Selamat Natal & Tahun Baru', 48, 120);

      cctx.font = '40px Georgia';
      cctx.fillStyle = '#ffd166';
      cctx.fillText(name, 48, 180);

      cctx.font = '20px Arial';
      cctx.fillStyle = '#cbd5e1';
      const message = 'Semoga tahun mendatang membawa kebahagiaan, kesehatan, dan kenangan manis.';

      (function drawWrapped(text, x, y, maxW, lineH) {
        const words = text.split(' ');
        let line = '';
        for (let n = 0; n < words.length; n++) {
          const w = words[n];
          const test = line + w + ' ';
          const tw = cctx.measureText(test).width;
          if (tw > maxW && n > 0) {
            cctx.fillText(line, x, y);
            line = w + ' ';
            y += lineH;
          } else {
            line = test;
          }
        }
        if (line) cctx.fillText(line, x, y);
      })(message, 48, 230, W / 2 - 80, 30);

      const treeImg = new Image();
      treeImg.src = svgOut.data;
      await new Promise((res, rej) => {
        treeImg.onload = res;
        treeImg.onerror = rej;
      });

      const tw = Math.min(420, W / 2);
      const th = (treeImg.height / treeImg.width) * tw;
      cctx.drawImage(treeImg, W - tw - 48, (H - th) / 2, tw, th);

      cctx.fillStyle = '#fff';
      cctx.font = '18px Arial';
      let yy = 360;
      wishes.slice(0, 6).forEach((w, i) => {
        cctx.fillText(`${i + 1}. ${w}`, 48, yy);
        yy += 28;
      });

      const a = document.createElement('a');
      a.href = c.toDataURL('image/png');
      a.download = `card-${Date.now()}.png`;
      a.click();
    } catch (err) {
      alert('Gagal generate card: ' + err);
      console.error(err);
    }
  });

  // recap slider
  const recapInner = document.getElementById('recapInner');
  const recapImages = [];
  for (let i = 1; i <= 6; i++) {
    const url = `https://picsum.photos/seed/recap${i}/900/500`;
    recapImages.push(url);
  }

  recapImages.forEach(u => {
    const s = document.createElement('div');
    s.style.minWidth = '100%';
    s.innerHTML = `<img src="${u}" style="width:100%;height:auto;border-radius:10px;display:block">`;
    recapInner.appendChild(s);
  });

  let slideIndex = 0;
  function showSlide(idx) {
    recapInner.style.transform = `translateX(-${idx * 100}%)`;
  }

  document.getElementById('nextSlide').onclick = () => {
    slideIndex = Math.min(slideIndex + 1, recapImages.length - 1);
    showSlide(slideIndex);
  };

  document.getElementById('prevSlide').onclick = () => {
    slideIndex = Math.max(slideIndex - 1, 0);
    showSlide(slideIndex);
  };

  function goToRecap() {
    treeCard.style.display = 'none';
    recapCard.style.display = 'block';
  }
  window.goToRecap = goToRecap;

  // initial: hide message & tree & recap until flow
  messageCard.style.display = 'none';
  treeCard.style.display = 'none';
  recapCard.style.display = 'none';
</script>
</body>
</html>
