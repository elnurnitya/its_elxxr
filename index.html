<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Kartu Natal & Tahun Baru Interaktif</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&family=Pacifico&display=swap" rel="stylesheet" />
  <style>
    body{margin:0;background:#0e1525;color:#fff;font-family:Montserrat;padding:0}
    .center{display:flex;align-items:center;justify-content:center}
    #name-popup{position:fixed;inset:0;background:rgba(0,0,0,0.8);z-index:20}
    #popup-box{background:#fff;color:#000;padding:30px;border-radius:12px;max-width:320px;width:90%;text-align:center}
    input{padding:10px;width:100%;margin-top:10px;border-radius:8px;border:1px solid #ccc}
    button{margin-top:12px;padding:10px 14px;border-radius:8px;border:none;cursor:pointer;background:#ffd166;font-weight:600}

    /* card awal */
    #welcome-card{display:none;position:fixed;inset:0;z-index:15;}
    #welcome-inner{background:#14243d;border-radius:20px;padding:30px;max-width:360px;text-align:center;box-shadow:0 8px 40px rgba(0,0,0,0.4)}
    #welcome-inner h1{font-family:Pacifico;font-size:32px;color:#ffd166;margin:0 0 6px}

    /* letter / message */
    #message-screen{display:none;padding:20px}
    .section{max-width:760px;margin:0 auto}

    /* wish tree */
    #wish-tree-screen{display:none;padding:20px;text-align:center}
    #tree-canvas{background:#fff;border-radius:18px;margin:20px auto;display:block}

    /* recap */
    #recap-screen{display:none;padding:20px;text-align:center}

  </style>
</head>
<body>

  <!-- POPUP NAMA -->
  <div id="name-popup" class="center">
    <div id="popup-box">
      <h2>Masukkan Nama Kamu âœ¨</h2>
      <input id="username" placeholder="Nama kamu" />
      <button id="submit-name">Lanjut</button>
    </div>
  </div>

  <!-- KARTU SELAMAT NATAL & TAHUN BARU -->
  <div id="welcome-card" class="center">
    <div id="welcome-inner">
      <h1>Selamat Natal & Tahun Baru</h1>
      <div id="welcome-name" style="font-size:18px;margin-bottom:12px"></div>
      <button id="open-message">Buka Card</button>
    </div>
  </div>

  <!-- PESAN UCAPAN (TERMASUK WISH TREE) -->
  <div id="message-screen">
    <div class="section">
      <h2 style="font-family:Pacifico;color:#ffd166;font-size:30px;text-align:center">Pesan Untukmu</h2>
      <p style="text-align:center">Semoga damai dan sukacita menyertaimu di tahun baru ini. Klik tombol di bawah untuk menambahkan harapanmu di Wish Tree.</p>
      <div style="text-align:center;margin-top:20px">
        <button id="go-tree">Buka Wish Tree ðŸŽ„</button>
      </div>
    </div>
  </div>

  <!-- WISH TREE -->
  <div id="wish-tree-screen">
    <h2 style="font-family:Pacifico;color:#ffd166;font-size:30px">Wish Tree ðŸŽ„</h2>
    <p>Tulis wish kamu, nanti akan muncul sebagai daun dan bisa kamu download bersama kartu.</p>

    <input id="wish-input" placeholder="Harapanmu..." style="padding:10px;width:80%;max-width:300px;border-radius:10px;border:none" />
    <br>
    <button id="submit-wish" style="margin-top:10px">Kirim Wish</button>

    <canvas id="tree-canvas" width="350" height="420"></canvas>

    <button id="download-tree">Download Wish Tree</button>
    <button id="download-card">Download Card</button>
  </div>

  <!-- RECAP -->
  <div id="recap-screen">
    <h2 style="font-family:Pacifico;color:#ffd166;font-size:30px">Your Year Recap âœ¨</h2>
    <p>Terima kasih sudah melewati tahun ini. Berikut adalah rangkuman momen perjalananmu.</p>

    <div id="recap-area" style="margin-top:20px">(Isi recap tampil di sini...)</div>
  </div>

<script>
  const popup = document.getElementById('name-popup');
  const welcomeCard = document.getElementById('welcome-card');
  const welcomeName = document.getElementById('welcome-name');
  const messageScreen = document.getElementById('message-screen');
  const treeScreen = document.getElementById('wish-tree-screen');
  const recapScreen = document.getElementById('recap-screen');

  document.getElementById('submit-name').onclick = () =>{
    const name = document.getElementById('username').value.trim();
    if(!name) return alert('Isi nama dulu ya!');
    popup.style.display = 'none';
    welcomeName.innerText = name;
    welcomeCard.style.display = 'flex';
  };

  document.getElementById('open-message').onclick = () =>{
    welcomeCard.style.display='none';
    messageScreen.style.display='block';
  };

  document.getElementById('go-tree').onclick = () =>{
    messageScreen.style.display='none';
    treeScreen.style.display='block';
  };

  // SIMPLE WISH TREE (CANVAS)
  const canvas = document.getElementById('tree-canvas');
  const ctx = canvas.getContext('2d');

  function drawTree(){
    ctx.fillStyle = '#5b3a2e';
    ctx.fillRect(160,250,30,140);
    ctx.fillStyle = '#0f5f2d';
    ctx.beginPath(); ctx.arc(175,220,120,0,Math.PI*2); ctx.fill();
  }
  drawTree();

  document.getElementById('submit-wish').onclick = ()=>{
    const wish = document.getElementById('wish-input').value.trim();
    if(!wish) return alert('Tulis wish dulu');
    ctx.fillStyle = '#fffbea';
    ctx.font = '14px Montserrat';
    const x = 100 + Math.random()*150;
    const y = 150 + Math.random()*150;
    ctx.fillText('â€¢ '+wish,x,y);
    alert('Wish ditambahkan!');
    setTimeout(()=>{
      treeScreen.style.display='none';
      recapScreen.style.display='block';
    },600);
  };

  document.getElementById('download-tree').onclick = ()=>{
    const link = document.createElement('a');
    link.download = 'wish-tree.png';
    link.href = canvas.toDataURL();
    link.click();
  };

  document.getElementById('download-card').onclick = ()=>{
    alert('Download kartu bisa ditambahkan menggunakan html2canvas.');
  };
</script>
</body>
</html>
